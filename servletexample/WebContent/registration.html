<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Bootstrap Example</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<script type="text/javascript">
function validateRegisterform() {
    var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    var passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;
    var cpassword = document.getElementById("cpassword").value;

    // Clear previous error messages
    document.getElementById("emailError").textContent = "";
    document.getElementById("passwordError").textContent = "";
    document.getElementById("cpasswordError").textContent = "";

    if (!email) {
        document.getElementById("emailError").textContent = "Please enter email ID";
        document.getElementById("email").focus();
        return false;
    } else if (!emailPattern.test(email)) {
        document.getElementById("emailError").textContent = "Please enter a valid email ID";
        document.getElementById("email").focus();
        return false;
    } else if (!password) {
        document.getElementById("passwordError").textContent = "Please enter password";
        document.getElementById("password").focus();
        return false;
    } else if (!passwordPattern.test(password)) {
        document.getElementById("passwordError").textContent = "Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one digit, and one special character.";
        document.getElementById("password").focus();
        return false;
    } else if (password != cpassword) {
        document.getElementById("cpasswordError").textContent = "Passwords must match";
        document.getElementById("cpassword").focus();
        return false;
    }

    return true;
}

function togglePasswordVisibility(id, toggleId) {
    var passwordField = document.getElementById(id);
    var toggleIcon = document.getElementById(toggleId);
    if (passwordField.type === "password") {
        passwordField.type = "text";
        toggleIcon.classList.remove("bi-eye");
        toggleIcon.classList.add("bi-eye-slash");
    } else {
        passwordField.type = "password";
        toggleIcon.classList.remove("bi-eye-slash");
        toggleIcon.classList.add("bi-eye");
    }
}
</script>
</head>
<body>
<!-- Form Example with javascript -->
<div class="container-fluid">
  <form action="RegisterServlet" method="post" onsubmit="return validateRegisterform();">
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Email address</label>
      <input type="email" class="form-control" id="email" name="email" aria-describedby="emailHelp">
      <span id="emailError" style="color: red;"></span>
    </div>
    <div class="mb-3">
      <label for="exampleInputPassword1" class="form-label">Password</label>
      <div class="input-group">
        <input type="password" class="form-control" id="password" name="password">
        <span class="input-group-text" onclick="togglePasswordVisibility('password', 'togglePassword')">
          <i id="togglePassword" class="bi bi-eye"></i>
        </span>
      </div>
      <span id="passwordError" style="color: red;"></span>
    </div>
    <div class="mb-3">
      <label for="exampleInputPassword2" class="form-label">Confirm Password</label>
      <div class="input-group">
        <input type="password" class="form-control" id="cpassword" name="cpassword">
        <span class="input-group-text" onclick="togglePasswordVisibility('cpassword', 'toggleCPassword')">
          <i id="toggleCPassword" class="bi bi-eye"></i>
        </span>
      </div>
      <span id="cpasswordError" style="color: red;"></span>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>

<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</body>
</html>
